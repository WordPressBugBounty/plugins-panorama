(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(t,n,o){return(n=function(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var a;(a=jQuery)(document).ready((function(){var e=document.querySelectorAll(".bppiv_panorama");Object.values(e).map((function(e){var t=a(e).data("settings"),o=t.bppiv_type,i=t.bppiv_type,r=t.bppiv_image_src,l=t.bppiv_video_src,c=t.bppiv_auto_play,d=t.bppiv_video_mute,p=t.bppiv_video_loop,s=t.control_show_hide_video,u=t.image_src_360,m=t.bppiv_auto_rotate,v=t.bppiv_speed,y=t.bppiv_auto_load,f=t.control_show_hide,g=t.draggable_360,_=t.compass_360,b=t.title_author,h=t.title_360,w=t.author_360,E=t.initial_view,L=t.initial_view_property,I=t.custom_control,O=t.initial_view_video_property,P=t.tour_360;if("video"===o){var B=l?l.url:[],S=Boolean(parseInt(c)),N=Boolean(parseInt(d)),k=Boolean(parseInt(p)),j=1!=Boolean(parseInt(s)),A=new PANOLENS.VideoPanorama(B,{autoplay:S,loop:k,muted:N}),C=new PANOLENS.Viewer({container:e,controlBar:j,initialLookAt:new THREE.Vector3(2,2,-Number.MAX_SAFE_INTEGER)});C.add(A),window.panoramaViewer=C,window.panoramaVideo=A,A.addEventListener("enter",(function(){C.camera.position.setX((null==O?void 0:O.top)||0),C.camera.position.setY((null==O?void 0:O.right)||0),C.camera.position.setZ((null==O?void 0:O.bottom)||1)})),function(e,t){var n=document.getElementById("wp-admin-bar-edit");if(console.log("hiii"),n){var o=document.createElement("div");o.classList.add("camera_position_wrapper"),e.appendChild(o);var a=document.createElement("button");a.innerText="Get Camera Position",o.appendChild(a);var i=document.createElement("p");a.addEventListener("click",(function(){var e={x:t.camera.position.x.toFixed(2),y:t.camera.position.y.toFixed(2),z:t.camera.position.z.toFixed(2)};o.appendChild(i),i.innerHTML=JSON.stringify(e)+" <br /> <b>this is only for admin. user can't see this</b>",o.appendChild(r)}));var r=document.createElement("button");r.classList.add("camera_close"),r.innerText="x",r.addEventListener("click",(function(){o.removeChild(i),o.removeChild(r)}))}}(A.container,C)}else if("gallery"===o){var V,x,F,T,H,D,R,Y,q,z=parseInt(null==t?void 0:t.bppiv_gallery_limit),M=t.bppiv_pan_gallery,G=M.slice(0,z);V=document.getElementById("gallery-container"),F=document.getElementById("panorama-container"),T=document.getElementById("bppiv-main-container");var X=document.getElementById("bppiv-progress-bar");H=F.querySelector(".close");var J=function(e){e.map((function(e){var t,n,o=null==e||null===(t=e.panoramic_img)||void 0===t?void 0:t.url;x=document.createElement("div"),q=document.createElement("span"),x.style.backgroundImage="url("+o+")",x.classList.add("photo"),q.classList.add("item-badge"),q.innerHTML="Video","1"===(null==e?void 0:e.gal_type_cheek)?(x.appendChild(q),x.url=null==e||null===(n=e.gal_type_video)||void 0===n?void 0:n.url,x.type="video"):(x.url=o,x.type="image"),x.addEventListener("click",(function(){if(!R){if("image"===this.type)R=new PANOLENS.ImagePanorama(this.url);else{if("video"!==this.type)return;R=new PANOLENS.VideoPanorama(this.url,{autoplay:!0})}R.addEventListener("progress",(function(e){Y=e.progress.loaded/e.progress.total*100,X.style.width=Y+"%",100===Y&&(X.style.opacity=0)})),D.add(R),F.classList.add("open")}}),!1),V.appendChild(x)})),V.classList.add("bppiv_panorama")};a(".pan_loadMore").on("click",(function(){G=M.slice(z,z+3),z+=3,J(G),z>=M.length&&(this.style.display="none")})),J(G),D=new PANOLENS.Viewer({container:T}),H.addEventListener("click",(function(){R.dispose(),D.remove(R),R=null,X.style.width=0,X.style.opacity=1,F.classList.remove("open")}),!1)}else if("gstreet"===o)R=new PANOLENS.GoogleStreetviewPanorama("".concat(t.bppiv_pano_id)),(D=new PANOLENS.Viewer({container:e,initialLookAt:new THREE.Vector3(2953.93,1891.55,5213.46)})).add(R),D.addUpdateCallback((function(){R.rotation.y+=.005}));else if("image360"===i){var Q=null!=u?u:"",U=Boolean(parseInt(m))?v:0,Z=Boolean(parseInt(y)),K=1!=Boolean(parseInt(f)),W=Boolean(parseInt(g)),$=null!=b?b:0,ee=Boolean(parseInt(_)),te=Boolean(parseInt(E))&&{pitch:parseFloat(L.top),yaw:parseFloat(L.right),hfov:parseFloat(200)}||{},ne=a(e).attr("id"),oe="1"===$?{title:h,author:w}:{};D=pannellum.viewer(ne,n(n({type:"equirectangular",panorama:Q,preview:Q,autoLoad:Z,autoRotate:U,draggable:W,showControls:K,compass:ee,orientationOnByDefault:!1},oe),te)),Boolean(parseInt(I))&&(document.getElementById("pan-up").addEventListener("click",(function(){D.setPitch(D.getPitch()+10)})),document.getElementById("pan-down").addEventListener("click",(function(){D.setPitch(D.getPitch()-10)})),document.getElementById("pan-left").addEventListener("click",(function(){D.setYaw(D.getYaw()-10)})),document.getElementById("pan-right").addEventListener("click",(function(){D.setYaw(D.getYaw()+10)})),document.getElementById("zoom-in").addEventListener("click",(function(){D.setHfov(D.getHfov()-10)})),document.getElementById("zoom-out").addEventListener("click",(function(){D.setHfov(D.getHfov()+10)})),document.getElementById("fullscreen").addEventListener("click",(function(){D.toggleFullscreen()})))}else if("tour360"===i){for(var ae,ie=a(e).attr("id"),re={},le=null,ce=0;ce<P.length;ce++){var de,pe,se,ue="1"===(null===(de=P[ce])||void 0===de?void 0:de.tourTitleAuthor)&&{title:P[ce].title,author:P[ce].author}||{},me="1"===(null===(pe=P[ce])||void 0===pe?void 0:pe.tour_hotSpot)&&{hotSpots:[{pitch:-.6,yaw:37.1,type:"scene",text:P[ce].hotSpot_txt,sceneId:P[ce].target_id}]}||{};"1"===(null===(se=P[ce])||void 0===se?void 0:se.default_data)&&(le=P[ce]),re[P[ce].tour_id]=n(n({},ue),{},{hfov:110,yaw:5,type:"equirectangular",panorama:P[ce].tour_img},me)}le=le||P[0],pannellum.viewer(ie,{autoLoad:!0,default:{firstScene:null===(ae=le)||void 0===ae?void 0:ae.tour_id,sceneFadeDuration:1e3},scenes:re})}else{var ve=r?r.url:[],ye=Boolean(parseInt(m)),fe=v||2,ge=1!=Boolean(parseInt(f)),_e=new PANOLENS.ImagePanorama(ve);new PANOLENS.Viewer({container:e,autoRotate:ye,autoRotateSpeed:parseFloat(fe),controlBar:ge}).add(_e)}}))}))})();